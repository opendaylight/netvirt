{
  "comments": [
    {
      "key": {
        "uuid": "9a245df4_0e4046a4",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 36
      },
      "lineNbr": 278,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "I see a lot of redundant subnetMap reads in this block.\nSubnetMap is being read and stored in a map, only to check if vpnInterfaceNeeds to be created:).\nInstead, store the subnetMaps in a HashMap, send the hashMap to createVpnInterface(). Also, use the same hashMap to retrieve the needed subnetMap in updateVpnInstanceWithIpFamily().\nThis will reduce a lot of subneteMap reads.",
      "range": {
        "startLine": 266,
        "startChar": 16,
        "endLine": 278,
        "endChar": 17
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_ee4fb2bc",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 36
      },
      "lineNbr": 282,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "why is isSubnetmapIpVersionChangesVpnInstance() not called here?\n\nEven here, you will have to update the vpnInstance only if the ipVersion is not already updated right?",
      "range": {
        "startLine": 280,
        "startChar": 21,
        "endLine": 282,
        "endChar": 82
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_ee3a1233",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 36
      },
      "lineNbr": 302,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "Please try to reduce subnetMap reads whereever possible, similar to my comments in line 278.",
      "range": {
        "startLine": 302,
        "startChar": 17,
        "endLine": 302,
        "endChar": 45
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_4e4fdebd",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 36
      },
      "lineNbr": 1711,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "call this only if its the first ipv4/6 subnet associated, similar to what you have done for dissociate",
      "range": {
        "startLine": 1710,
        "startChar": 16,
        "endLine": 1711,
        "endChar": 98
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_2e4a6aac",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 36
      },
      "lineNbr": 1807,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "only if its the first ipv4/6 subnet in the vpn",
      "range": {
        "startLine": 1806,
        "startChar": 44,
        "endLine": 1807,
        "endChar": 75
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6e2f42f7",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnUtils.java",
        "patchSetId": 36
      },
      "lineNbr": 1337,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "There is already a method called vpnRd() in VpnUtil.java.\nMove that method from VpnUtil.java to VpnHelper.java, and use it in NeutronVpn",
      "range": {
        "startLine": 1314,
        "startChar": 4,
        "endLine": 1337,
        "endChar": 5
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_ce0d8e92",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnUtils.java",
        "patchSetId": 36
      },
      "lineNbr": 1367,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "please pass subnetMap from called instead of reading it again",
      "range": {
        "startLine": 1367,
        "startChar": 14,
        "endLine": 1367,
        "endChar": 34
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_2e454ab3",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnUtils.java",
        "patchSetId": 36
      },
      "lineNbr": 1374,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "shouldVpnHandleIpVersionChange()",
      "range": {
        "startLine": 1374,
        "startChar": 26,
        "endLine": 1374,
        "endChar": 64
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_ae101aa9",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnUtils.java",
        "patchSetId": 36
      },
      "lineNbr": 1401,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "info",
      "range": {
        "startLine": 1401,
        "startChar": 12,
        "endLine": 1401,
        "endChar": 17
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_0e27a613",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnUtils.java",
        "patchSetId": 36
      },
      "lineNbr": 1441,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "info",
      "range": {
        "startLine": 1441,
        "startChar": 16,
        "endLine": 1441,
        "endChar": 20
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_8ec8b623",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnUtils.java",
        "patchSetId": 36
      },
      "lineNbr": 1444,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "the caller will tell you if ipv4/v6 version change is needed for the vpnInstance. so this block is not needed.\n\nYou only need to do this... based on the enum value of ipVersion, and based on the boolean set/unset the ipV4/v6 flag in vpn-instance-op-data, which you have already done in the djc below.\n\n\n----\nMy point is that I see you have used two different approaches for set/unset of ipFamilyConfigured in vpn-instance-op. \n(1) For add, you just compare the ipVersion of the subnet and the ipVersionConfigured flag of the vpn, and then set the flag. \n(2) However, for remove, you get all subnetMaps and check if a vpn-instance-op update is required, before calling this method. \nIt would be better to keep a single approach for both set/unset ipFamilyConfigured flag. Either (1) or (2)",
      "range": {
        "startLine": 1428,
        "startChar": 8,
        "endLine": 1444,
        "endChar": 9
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6e99021f",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInstanceListener.java",
        "patchSetId": 36
      },
      "lineNbr": 408,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "I am unable to remember why this change is required...  Why read a vpn-op-data here? Was it something we discussed?\n\nIf not please retain the original code.",
      "range": {
        "startLine": 395,
        "startChar": 12,
        "endLine": 408,
        "endChar": 62
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_8eef1687",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnOpStatusListener.java",
        "patchSetId": 36
      },
      "lineNbr": 142,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "move this above getVpnId()",
      "range": {
        "startLine": 140,
        "startChar": 12,
        "endLine": 142,
        "endChar": 13
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_aeec9a90",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnOpStatusListener.java",
        "patchSetId": 36
      },
      "lineNbr": 152,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "these should be the first lines within the else...if",
      "range": {
        "startLine": 143,
        "startChar": 12,
        "endLine": 152,
        "endChar": 13
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_eefdf23c",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnOpStatusListener.java",
        "patchSetId": 36
      },
      "lineNbr": 197,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-23T10:27:28Z",
      "side": 1,
      "message": "If this block is similar to addBgpVrf() in VpnInstanceListener, could you please move this to a new method and call that method in both the places?",
      "range": {
        "startLine": 176,
        "startChar": 17,
        "endLine": 197,
        "endChar": 43
      },
      "revId": "de738b961562f450bb1ccbe7bcf18a8458d6b91c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}