{
  "comments": [
    {
      "key": {
        "uuid": "b645538a_7fe03959",
        "filename": "vpnmanager/impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ExtraRouteAdjacencyListener.java",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 6154
      },
      "writtenOn": "2018-09-12T06:56:57Z",
      "side": 1,
      "message": "Now we have extra-routes stored in separate container , but not in VpnInterface adj. When add() for an extra-route entry is triggered , you are not checking whether south-bound state for the parent interface is available. In the earlier code , since extra-route was part of VpnInterace Adj , we used to check for the south-bound state. If south-bound state for parent interface is received later , you are not handling the extra-route FIB creation in new code.",
      "revId": "92a7033a09fd20da4eb9f6ed5b51c4683a89ba8e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79de0b64_3f7ef5e5",
        "filename": "vpnmanager/impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ExtraRouteAdjacencyListener.java",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 5871
      },
      "writtenOn": "2018-09-12T07:43:07Z",
      "side": 1,
      "message": "Yes, I think its better to add that check.\nActually the interfaceName (line 149) will be filled only if there is a VM booted on the nextHop. Else, it will be null. If an extra-route is added without a VM for its nexthop, then the interfaceName attribute will be filled on a interface state up event and the update() method will be called.\n\nSo, for the case where VM is booted but for some reasone interface state is not present, I guess we can add that additional check as well. Please let me knoe your thoughts.",
      "parentUuid": "b645538a_7fe03959",
      "revId": "92a7033a09fd20da4eb9f6ed5b51c4683a89ba8e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f78549d_2d6a3867",
        "filename": "vpnmanager/impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ExtraRouteAdjacencyListener.java",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 6154
      },
      "writtenOn": "2018-09-12T08:14:19Z",
      "side": 1,
      "message": "Even if VM is booted and interfaceName is populated , its possible that , VpnEngine has not received the interface-state in time. This can most likely to happen during reboots.\n\nAs you said , its better to handle update() call and still check for the interface-state. Ravi said , extra-route can be added without nexthop being present. Once VM is booted , from noth-bound if you add the interace-name , update() gets tiggered. But still south-bound interface-state might still not be available. When south-bound interface-state comes , if you update the interface-name again in this extra-route entry , update wont be triggered.\n\nSo we have to think of foolproof idea.",
      "parentUuid": "79de0b64_3f7ef5e5",
      "revId": "92a7033a09fd20da4eb9f6ed5b51c4683a89ba8e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}