{
  "comments": [
    {
      "key": {
        "uuid": "fafc7978_d85cc84d",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/ExternalRoutersListener.java",
        "patchSetId": 13
      },
      "lineNbr": 1595,
      "author": {
        "id": 8584
      },
      "writtenOn": "2019-11-11T18:10:40Z",
      "side": 1,
      "message": "this can be refactored, so you can avoid having explicit cosntant for VXLAN provider type..\n\nif (extNwProviderType !\u003d null \u0026\u0026 extNwProviderType.equals(VrfEntry.EncapType.Vxlan)) {\n...\n...\n}",
      "range": {
        "startLine": 1589,
        "startChar": 8,
        "endLine": 1595,
        "endChar": 9
      },
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_bde616ae",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatConstants.java",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-02T04:15:07Z",
      "side": 1,
      "message": "refer this from NwConstants or something.. Please talk to Abhinav.",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_3856b42a",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatConstants.java",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 8584
      },
      "writtenOn": "2019-11-11T18:10:40Z",
      "side": 1,
      "message": "see my comment in ExternalRoutersListener.java for the same.",
      "parentUuid": "fafc7978_bde616ae",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_dd24ba0e",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 57,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-02T03:42:38Z",
      "side": 1,
      "message": "general note going forward - try to separate your patches so it won\u0027t contain unreachable code",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_38c23434",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 57,
      "author": {
        "id": 6741
      },
      "writtenOn": "2017-03-03T06:19:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_dd24ba0e",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5de44ae0",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 90,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-02T03:42:38Z",
      "side": 1,
      "message": "this should be renamed to getEncapType",
      "range": {
        "startLine": 90,
        "startChar": 30,
        "endLine": 90,
        "endChar": 50
      },
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_9db9927b",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 90,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-02T04:15:07Z",
      "side": 1,
      "message": "this method may also not be rquired.",
      "parentUuid": "fafc7978_5de44ae0",
      "range": {
        "startLine": 90,
        "startChar": 30,
        "endLine": 90,
        "endChar": 50
      },
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_18bf70ab",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 90,
      "author": {
        "id": 6741
      },
      "writtenOn": "2017-03-03T06:19:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_9db9927b",
      "range": {
        "startLine": 90,
        "startChar": 30,
        "endLine": 90,
        "endChar": 50
      },
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5dc3aaec",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 156,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-02T04:15:07Z",
      "side": 1,
      "message": "this method may not be required as per my comment in NatUtil..",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_fdf9be80",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 173,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-02T03:42:38Z",
      "side": 1,
      "message": "what are the custom instructions? why can\u0027t IVpnManager.setupSubnetMacIntoVpnInstance be used to install/remove this flow?",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_78067c87",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatEvpnUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 173,
      "author": {
        "id": 6741
      },
      "writtenOn": "2017-03-03T06:19:09Z",
      "side": 1,
      "message": "As of now removed this unused code from this review. Will add this method in subsequent review (SNAT review).",
      "parentUuid": "fafc7978_fdf9be80",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_3d9d0667",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 1663,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-02T03:42:38Z",
      "side": 1,
      "message": "Could you explain why is this decision based on the *external* network type here? the way I see it, this value is used when the packet is still in the scope of the internal VPN and should be affected by the tenant (private) network type. Only once the packet has traversed the SNAT pipeline and the internal VPN id was replaced by the internet VPN these kinds of conditions needs to be considered.",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_dd003a36",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 1663,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-02T04:15:07Z",
      "side": 1,
      "message": "Tali,\n\nThe packet is just relayed on the router-arm in a proprietary way from Non-NAPT switch to NAPT-switch.   This review is for EVPN and not for L3-VNI-Forwarding.\n\nWhen the L3VNI-Forwarding changes land, there we need to follow tenant (private) network arm of the router (if that arm is of VXLAN-type) and then use that VNI to be enforced from Non-NAPT to NAPT.\n\nThe second part is why are we then checking the external-network-type to be VXLAN.  That is incorrect.  What should be checked here is just if the Router is part of an L3VPNOverVXLAN. If yes, allocate LPortTag per router and use that.  If not just use the legacy router-Id.\n\nKarthikeyan, please address this change appropriately and make sure spec is aligned here.",
      "parentUuid": "fafc7978_3d9d0667",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_61999d6d",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 1663,
      "author": {
        "id": 6741
      },
      "writtenOn": "2017-03-03T06:19:09Z",
      "side": 1,
      "message": "Hi Vivek,\n \n I accept your comment for Non-NAPT to NAPT, we should not use external network at all. Requesting your comment on below proposal approach.\n\n For checking if the router is part of L3VPNOverVXLAN, \n\n1) whether do we need to check associated all the internal sub-networks provider type as VXLAN. If yes then tunnel-id will be setting as router-lport-tag else router-id as tunnel-id.\n\n2) Between Non-NAPT to NAPT if tunnel endpoint is VXLAN then can we allocate router-lport-tag as tunnel-id?\n\nAs per my understanding, By default all the internal DC communication would be established with VXLAN Mesh topology right?",
      "parentUuid": "fafc7978_dd003a36",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_a4a6f3ab",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 1663,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-03T08:22:14Z",
      "side": 1,
      "message": "For the last question, all Internal DC communications will be either VXLAN (or) VLAN.  They won\u0027t be anything else.\n\nToday we donot support VLAN internal To VLAN external use-case at all.   When it comes, we can go through that use-case.\nSo for the question 2), you MUST allocate a router-lport-tag if the router is part of an L3VPNOverVxlan.  If you have questions on how to check that, please ask KiranN as he has provided APIs to use.\n\nFor question 1), NO IT IS NOT REQUIRED in the EVPN change review here to check if the attahced subnets are part of a VXLAN Tenant network.   Please only see if router is part of L3VPNOverVXLAN and then direcly allocate lport-tag per router and use it, otherwise leave the code to use legacy router-id.",
      "parentUuid": "fafc7978_61999d6d",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1a4e3a97",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 13
      },
      "lineNbr": 1663,
      "author": {
        "id": 6741
      },
      "writtenOn": "2017-03-03T12:04:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_a4a6f3ab",
      "revId": "411ea41969261edfd16f17ecce1a394c2c65ebc7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}