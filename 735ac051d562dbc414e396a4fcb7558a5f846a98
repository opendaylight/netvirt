{
  "comments": [
    {
      "key": {
        "uuid": "9a245df4_c0c096e2",
        "filename": "vpnservice/alarm/alarm-impl/pom.xml",
        "patchSetId": 24
      },
      "lineNbr": 21,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-31T17:04:33Z",
      "side": 1,
      "message": "Why is this jar and not bundle?",
      "range": {
        "startLine": 21,
        "startChar": 15,
        "endLine": 21,
        "endChar": 18
      },
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_090bf225",
        "filename": "vpnservice/alarm/alarm-impl/pom.xml",
        "patchSetId": 24
      },
      "lineNbr": 21,
      "author": {
        "id": 6988
      },
      "writtenOn": "2017-11-02T10:21:25Z",
      "side": 1,
      "message": "Hi Tom, sorry this is just a test, but I am right with you it should be a bundle.\nThks",
      "parentUuid": "9a245df4_c0c096e2",
      "range": {
        "startLine": 21,
        "startChar": 15,
        "endLine": 21,
        "endChar": 18
      },
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_40e30605",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 72,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-31T16:31:23Z",
      "side": 1,
      "message": "It\u0027s better to reference the interface Map - callers don\u0027t need to know implementation details (eg, what if you ever wanted to change it to TreeMap internally?).",
      "range": {
        "startLine": 72,
        "startChar": 11,
        "endLine": 72,
        "endChar": 18
      },
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6968ae87",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 72,
      "author": {
        "id": 6988
      },
      "writtenOn": "2017-11-02T10:21:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a245df4_40e30605",
      "range": {
        "startLine": 72,
        "startChar": 11,
        "endLine": 72,
        "endChar": 18
      },
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_3c40b2a4",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 93,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-11-02T13:28:28Z",
      "side": 1,
      "message": "So based on my understanding that raiseAlarmObjectMap will be used to store the last active alarm by source, should this be put or putIfAbsent? What if this sequence occurs:\n\n  raiseAlarm\n  raiseAlarm\n  clearAlarm\n\nIs this valid? It doesn\u0027t seem so however raiseAlarm would allow it. In this case 2 raiseAlarm notifications would go out but  raiseAlarmObjectMap would store the first and not the intended last with putIfAbsent. So if only one active alarm is valid, you could actually use raiseAlarmObjectMap.putIfAbsent to enforce that, ie if already present, reject the new alarm.",
      "range": {
        "startLine": 93,
        "startChar": 45,
        "endLine": 93,
        "endChar": 56
      },
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_3fb0a442",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 93,
      "author": {
        "id": 6988
      },
      "writtenOn": "2017-11-02T14:42:32Z",
      "side": 1,
      "message": "Hi Tom, I agree. I will do it.\n\nActually we are expecting to get only the last alarm for each unique keys. So I have to replace the old list by the new one. And if I want the new list with the old list as new values I will have to get the mapCopy to find this old list to add it to the new list and call raiseAlarm again (but right now it is not the behavior expected). Thks",
      "parentUuid": "9a245df4_3c40b2a4",
      "range": {
        "startLine": 93,
        "startChar": 45,
        "endLine": 93,
        "endChar": 56
      },
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_e0d4ba21",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 97,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-31T16:31:23Z",
      "side": 1,
      "message": "So it looks like you add this instance as a NotificationListener to itself to update raiseAlarmObjectMap. Why not update it directly in raiseAlarm/clearAlarm?\n\nHowever raiseAlarmObjectMap is only used by unit tests. Why not add a NotificationListener in the unit tests instead of maintaining raiseAlarmObjectMap just for unit tests?",
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_80f85e4a",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 97,
      "author": {
        "id": 6988
      },
      "writtenOn": "2017-11-02T10:21:25Z",
      "side": 1,
      "message": "raiseAlarmObjectMap is not only use by unit test, NeutronvpnManager use it too (just to fill and clear it). What is that? could you tell me. so I agree, this map is not really used right now but in a future we will expect to use it  (for example : in odl console (to see trace of error for example) or in other ways (like a back, come from listener)). but let us do that in a future review please not right now. Thks",
      "parentUuid": "9a245df4_e0d4ba21",
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_9c08be92",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 97,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-11-02T13:28:28Z",
      "side": 1,
      "message": "hmm... NeutronvpnManager does not call getRaiseAlarmObjectMapCopy - it indirectly raiseAarm/clearAlarm. \n\n\"What is that? could you tell me.\" - I don\u0027t know what you\u0027re referring to here.\n\nSo raiseAlarmObjectMap will be used to store the last active \"alarm\" by source for reporting, correct? (Comments in the code to clarify intent would be useful) That\u0027s fine but why don\u0027t you just update raiseAlarmObjectMap directly in raiseAarm/clearAlarm. That\u0027s much simpler - no need to self-notify to do it.",
      "parentUuid": "9a245df4_80f85e4a",
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_1f1cc012",
        "filename": "vpnservice/alarm/alarm-impl/src/main/java/org/opendaylight/netvirt/alarm/NvpnNbrControlPathAlarm.java",
        "patchSetId": 24
      },
      "lineNbr": 97,
      "author": {
        "id": 6988
      },
      "writtenOn": "2017-11-02T14:42:32Z",
      "side": 1,
      "message": "Hi Tom, I agree, but I want to do more for future features.\n\n*) Yes mapCopy is not used now (except for test message, that is really not mandatory, but only helpful) but for my team we will expect to get the mapCopy for list alarm runing for example (and for other future treatments).\n\n*) about the listener (the notify), yes we are self-notify these events to do a few tasks for the future review.\n\nI will comment that in the code.\n\n\nThks",
      "parentUuid": "9a245df4_9c08be92",
      "revId": "735ac051d562dbc414e396a4fcb7558a5f846a98",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}