{
  "comments": [
    {
      "key": {
        "uuid": "fafc7978_5affbeaa",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/FibRpcServiceImpl.java",
        "patchSetId": 14
      },
      "lineNbr": 251,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "is the trace necessary, can\u0027t you just overload the debug 2 lines below.",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_fa9e7206",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/FibRpcServiceImpl.java",
        "patchSetId": 14
      },
      "lineNbr": 251,
      "author": {
        "id": 6248
      },
      "writtenOn": "2017-03-21T10:34:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_5affbeaa",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_ba2b4a32",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/NexthopManager.java",
        "patchSetId": 14
      },
      "lineNbr": 747,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "we said subnetOpData and not subnetMap.\n\nsubnetOpData will start to carry networkId.\n\nI suggest you can can retain the left side as is, and we will make the change here when we land VNI forwarding changes.\n\nsee the review here for more details:\nhttps://git.opendaylight.org/gerrit/#/c/52301/",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_9a64864a",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/NexthopManager.java",
        "patchSetId": 14
      },
      "lineNbr": 747,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-21T09:41:22Z",
      "side": 1,
      "message": "Vivek,\nsubnetOpData is filled only when using subnetRoute\nwe don\u0027t have this info today and don\u0027t want to rely on this feature for separation of concerns",
      "parentUuid": "fafc7978_ba2b4a32",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5fdded41",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/NexthopManager.java",
        "patchSetId": 14
      },
      "lineNbr": 747,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T12:02:03Z",
      "side": 1,
      "message": "Relying on NeutronVpn filled information in VrfEntryListener is asking for problems at scale.  I understand this is in creational path, but we should not bring in history that NeutronVpn  which is 2 levels above FibManager should be coupled here.  \n\nSubnetOpData will be always filled as part of VNI-forwarding feature.   Only change is that subnet-Op-data will be used only for subnetRoute.",
      "parentUuid": "fafc7978_9a64864a",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7a5442ca",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 373,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "this should be done only for vrfEntries that are not of RouteOrigin self-imported.\n\nplease add method in the right file (i think FibHelper)\nisControllerManagedNonSelfImportedRoute(RouteOrigin.valueOf(vrfEntry.getRouteOrigin()) and use that method to make your setting of vpnToDpnList.",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1c74139b",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 373,
      "author": {
        "id": 6248
      },
      "writtenOn": "2017-03-21T10:34:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_7a5442ca",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_89760605",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 1183,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-20T18:09:28Z",
      "side": 1,
      "message": "this code should be inside addRewriteDstMacAction.\nIf dst-mac found in vrf-entry use it\notherwise apply the current logic (get from adjacency)",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7ac72265",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 1183,
      "author": {
        "id": 6248
      },
      "writtenOn": "2017-03-21T09:09:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_89760605",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_ba5d0aef",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 1183,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "Who fills this mac value in vrfentry?\n\nI see that rewritedstmac uses the macaddress from the adjacency which is the right approach.",
      "parentUuid": "fafc7978_89760605",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_fa59528f",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 1183,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-21T09:41:22Z",
      "side": 1,
      "message": "the adjacency is not there for FIP/router-gw\nas none of them is associated to VpnInterface",
      "parentUuid": "fafc7978_ba5d0aef",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1af536cb",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 2525,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "this will go through all VRFEntries in the datastore .  This is expensive as in a BGP-Driven environment, you will have a lot of BGP entries being programmed on a DPN and none of them will have a prefixToInteface available.\n\nI suggest we remove this method and retain the direct call to createRemoteFibEntry.",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_3c81174b",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 2525,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-03-21T10:17:10Z",
      "side": 1,
      "message": "this is not only nice to have method\nWe had a similar issue about a month ago that was fixed in [1] and this patch contains more of the same for the same problem - trying to install RNH entries on the local DPN and thus overriding the LNH since the match is equal.\nTunnel-based underlays are \"saved\" from this bug since the ITM fails to find tunnel between same src,dst DPNs so the actual RNH installation for the local DPN fails with error.\nFor flat/vlan there is no such luck and the LNH is overridden by the RNH from this code.\nIs there any why to add a condition on this method (maybe on RouteOrigin) to avoid the performance hit in case of BGP?\n\n\n[1] https://git.opendaylight.org/gerrit/#/c/51846/",
      "parentUuid": "fafc7978_1af536cb",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_bfedf9f1",
        "filename": "vpnservice/fibmanager/fibmanager-impl/src/main/java/org/opendaylight/netvirt/fibmanager/VrfEntryListener.java",
        "patchSetId": 14
      },
      "lineNbr": 2525,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T12:02:03Z",
      "side": 1,
      "message": "Please please add RouterOrigin BGP check here..  All BGP Imported Routes are only remote routes.",
      "parentUuid": "fafc7978_3c81174b",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1a1c1613",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/ExternalNetworksChangeListener.java",
        "patchSetId": 14
      },
      "lineNbr": 234,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "can you plesae put that /* parameter */ after null like \n/* external-router */",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5c6e9bca",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/ExternalNetworksChangeListener.java",
        "patchSetId": 14
      },
      "lineNbr": 234,
      "author": {
        "id": 6248
      },
      "writtenOn": "2017-03-21T10:34:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_1a1c1613",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_9ad76623",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NaptSwitchHA.java",
        "patchSetId": 14
      },
      "lineNbr": 875,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "ditto /* external-router */",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_dcb8cb2c",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NaptSwitchHA.java",
        "patchSetId": 14
      },
      "lineNbr": 875,
      "author": {
        "id": 6248
      },
      "writtenOn": "2017-03-21T10:34:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_9ad76623",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7a756231",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 14
      },
      "lineNbr": 662,
      "author": {
        "id": 5492
      },
      "writtenOn": "2017-03-21T09:19:06Z",
      "side": 1,
      "message": "where is this macAddress used?",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1ce9b31a",
        "filename": "vpnservice/natservice/natservice-impl/src/main/java/org/opendaylight/netvirt/natservice/internal/NatUtil.java",
        "patchSetId": 14
      },
      "lineNbr": 662,
      "author": {
        "id": 6248
      },
      "writtenOn": "2017-03-21T10:34:30Z",
      "side": 1,
      "message": "It is used in VrfEntryListener in addRewriteDstMacAction.\nFor local floating IPs it will set the MAC in the FIB table flow when it output the packet to port.",
      "parentUuid": "fafc7978_7a756231",
      "revId": "27141aea4b022a42822f013a14b53c9c607b20f2",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}