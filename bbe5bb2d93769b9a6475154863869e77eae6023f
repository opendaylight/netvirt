{
  "comments": [
    {
      "key": {
        "uuid": "da5c1566_4e60af35",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-05-31T22:07:24Z",
      "side": 1,
      "message": "You\u0027re importing a PipelineOrchestrator OSGi service but it\u0027s not used. What is the intent here?",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_aeaceb36",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 3675
      },
      "writtenOn": "2016-05-31T22:40:01Z",
      "side": 1,
      "message": "It\u0027s needed because of funky dependency:\n\nSfcClassifierService extends AbstractInstanceService\nhttps://github.com/opendaylight/netvirt/blob/master/openstack/net-virt-sfc/impl/src/main/java/org/opendaylight/netvirt/openstack/netvirt/sfc/workaround/services/SfcClassifierService.java#l57\n\nLooking at line 93 https://github.com/opendaylight/netvirt/blob/master/openstack/net-virt-sfc/impl/src/main/java/org/opendaylight/netvirt/openstack/netvirt/sfc/workaround/services/SfcClassifierService.java#l93 , it calls super.setDependencies that requires the PipelineOrchestrator service\n\nSee https://github.com/opendaylight/netvirt/blob/3997f73ee6cd22c17de329a1ac4113e265b06203/openstack/net-virt-providers/src/main/java/org/opendaylight/netvirt/openstack/netvirt/providers/openflow13/AbstractServiceInstance.java#l78\n\nSo if I don\u0027t register the service, blueprint will fail to load properly.",
      "parentUuid": "da5c1566_4e60af35",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_ae086b2e",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-05-31T23:15:02Z",
      "side": 1,
      "message": "I see now why you did it. This is really funky. There\u0027s several issues with how this is implemented but it would take significant surgery to fix it and do it right. One thing you could do is at least pass the PipelineOrchestrator to the AbstractServiceInstance (i.e. add another setDependencies method) so it doesn\u0027t need to retrieve it via ServiceHelper (which never ungets the service which causes a leak).\n\nAlso on line 80, \"ServiceHelper.getGlobalInstance(Southbound.class, serviceInstance)\", it seems we might run into the same issue where the Southbound service isn\u0027t registered yet. I think it would be safest to do the same thing as with PipelineOrchestrator.",
      "parentUuid": "da5c1566_aeaceb36",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_22e74f42",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 3675
      },
      "writtenOn": "2016-05-31T23:56:59Z",
      "side": 1,
      "message": "Crap... you\u0027re right about the Southbound service... I missed it, it didn\u0027t pop out while testing because I believe it is registered somewhere else...\n\nI really want to move forward so I\u0027ll add the same hack as the one I\u0027ve done for PipelineOrchestrator, and I can add a comment saying this is temporary.\n\nThose hacks will be removed in this patch: https://git.opendaylight.org/gerrit/#/c/39072/ that will get rid of all the funky wiring stuff done with ServiceReference / Services and so on.",
      "parentUuid": "da5c1566_ae086b2e",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_62a147a9",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-06-01T02:53:24Z",
      "side": 1,
      "message": "Sounds good. The Southbound service is used in a couple methods so perhaps you\u0027re initial testing didn\u0027t hit hat code. Or the service happened to be available. I think this worked before b/c the bundle that advertises the services was probably started by the CSS via the feature dependencies. Hidden dependencies... hopefully there\u0027s no more.",
      "parentUuid": "da5c1566_22e74f42",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_ee738313",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-05-31T22:07:24Z",
      "side": 1,
      "message": "The ordering of the args doesn\u0027t match the constructor - they should be  \"dataBroker\",  \"netvirtSfcConfig\", \"blueprintBundleContext\".",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_4e638f1a",
        "filename": "openstack/net-virt-sfc/impl/src/main/resources/org/opendaylight/blueprint/netvirt-sfc.xml",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 3675
      },
      "writtenOn": "2016-05-31T22:40:01Z",
      "side": 1,
      "message": "Huh! Can\u0027t recall If I modified the code after testing, but I\u0027m sure it was working fine at some point. Will address this. Thanks",
      "parentUuid": "da5c1566_ee738313",
      "revId": "bbe5bb2d93769b9a6475154863869e77eae6023f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}