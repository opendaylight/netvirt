{
  "comments": [
    {
      "key": {
        "uuid": "3a65312a_4148735b",
        "filename": "openstack/net-virt-it/src/test/java/org/opendaylight/netvirt/openstack/netvirt/it/NetvirtIT.java",
        "patchSetId": 3
      },
      "lineNbr": 430,
      "author": {
        "id": 773
      },
      "writtenOn": "2016-11-03T19:04:03Z",
      "side": 1,
      "message": "Use the Service enums rather than a constant: Service.RESUBMIT_ACL_SERVICE.getTable().",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_fbb047f6",
        "filename": "openstack/net-virt-it/src/test/java/org/opendaylight/netvirt/openstack/netvirt/it/NetvirtIT.java",
        "patchSetId": 3
      },
      "lineNbr": 430,
      "author": {
        "id": 4018
      },
      "writtenOn": "2016-11-04T11:48:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3a65312a_4148735b",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_01dafb77",
        "filename": "openstack/net-virt-it/src/test/java/org/opendaylight/netvirt/openstack/netvirt/it/NetvirtIT.java",
        "patchSetId": 3
      },
      "lineNbr": 431,
      "author": {
        "id": 773
      },
      "writtenOn": "2016-11-03T19:04:03Z",
      "side": 1,
      "message": "I don\u0027t think the Resubmit flow should be verified here. This block of code is verifying the default pipeline flows. The ReSubmit looks like a flow installed later. \n\nWhat could be an issue is if the Resubmit was included as part of the static pipeline where everything is expected to be a table\u003dx,actions:goto_table\u003dy. Maybe a default pipeline flow should be installed that is a drop rule?\n\nAt a minimum, though, I think we should just not look for the Resubmit at this point since it isn\u0027t a default pipeline flow.",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_bb636fb0",
        "filename": "openstack/net-virt-it/src/test/java/org/opendaylight/netvirt/openstack/netvirt/it/NetvirtIT.java",
        "patchSetId": 3
      },
      "lineNbr": 431,
      "author": {
        "id": 4018
      },
      "writtenOn": "2016-11-04T11:48:53Z",
      "side": 1,
      "message": "Sam,\n\nActually, the flowid (DEFAULT_PIPELINE_FLOW_31) is verifying in configuration\nand operational datastore which has recently added in table service.\nWhile verifying API docs the flow id is not available in configuration and operational datastore.\ninstead of that flowid exist as Resubmit_.\nPlease find in below for reference error:\nhttps://logs.opendaylight.org/releng/jenkins092/netvirt-daily-full-integration-carbon/91/archives/2.5.0-net-virt-IT.log.gz\ntestNetVirt(org.opendaylight.netvirt.openstack.netvirt.it.NetvirtIT)\njava.lang.AssertionError: Could not read flow DEFAULT_PIPELINE_FLOW_31 from configuration\n\tat org.junit.Assert.fail(Assert.java:88)\n\tat org.junit.Assert.assertTrue(Assert.java:41)\n\tat org.junit.Assert.assertNotNull(Assert.java:712)\n\tat org.opendaylight.netvirt.utils.netvirt.it.utils.NetvirtItUtils.verifyFlowByFields(NetvirtItUtils.java:214)\n\tat org.opendaylight.netvirt.utils.netvirt.it.utils.NetvirtItUtils.verifyFlowByFields(NetvirtItUtils.java:180)\n\tat org.opendaylight.netvirt.openstack.netvirt.it.NetvirtIT.testNetVirt(NetvirtIT.java:429)\n\nAPI Docs reference for configuration:\nhttp://10.0.0.1:8181/apidoc/explorer/index.html#!/opendaylight-inventory(2013-08-19)/GET_nodes_get_1\n{\n            \"id\": 31,\n            \"flow\": [\n              {\n                \"id\": \"ReSubmit_\",\n                \"idle-timeout\": 0,\n                \"hard-timeout\": 0,\n                \"barrier\": false,\n                \"instructions\": {\n                  \"instruction\": [\n                    {\n                      \"order\": 0,\n                      \"apply-actions\": {\n                        \"action\": [\n                          {\n                            \"order\": 1,\n                            \"openflowplugin-extension-nicira-action:nx-resubmit\": {\n                              \"table\": 40\n                            }\n                          },\n                          {\n                            \"order\": 0,\n                            \"openflowplugin-extension-nicira-action:nx-resubmit\": {\n                              \"table\": 39\n                            }\n                          }\n                        ]\n                      }\n                    }\n                  ]\n                },\n                \"priority\": 0,\n                \"table_id\": 31,\n                \"strict\": true,\n                \"flow-name\": \"ReSubmit_\"\n              }",
      "parentUuid": "3a65312a_01dafb77",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_2c0d6791",
        "filename": "openstack/net-virt-it/src/test/java/org/opendaylight/netvirt/openstack/netvirt/it/NetvirtIT.java",
        "patchSetId": 3
      },
      "lineNbr": 431,
      "author": {
        "id": 773
      },
      "writtenOn": "2016-11-04T21:04:11Z",
      "side": 1,
      "message": "The Resubmit_ flows are not part of the default pipeline which is what this block of code is verifying. The node connects, br-int is created and then the default pipeline flows installed. At this point the Resubmit_flows would not exist. Later after the ports and neutron events happen the Resubmit_flows would pop up right?",
      "parentUuid": "3a65312a_bb636fb0",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_ff094c2d",
        "filename": "openstack/net-virt-it/src/test/java/org/opendaylight/netvirt/openstack/netvirt/it/NetvirtIT.java",
        "patchSetId": 3
      },
      "lineNbr": 431,
      "author": {
        "id": 4018
      },
      "writtenOn": "2016-11-07T09:12:09Z",
      "side": 1,
      "message": "No. If br-int is connected then by default Resubmit flows are available.\nPlease find the default dump flows,\n[stack@devstack-control devstack]$ sudo ovs-ofctl -O OpenFlow13 dump-flows br-int\nOFPST_FLOW reply (OF1.3) (xid\u003d0x2):\n cookie\u003d0x0, duration\u003d17.261s, table\u003d0, n_packets\u003d0, n_bytes\u003d0, dl_type\u003d0x88cc actions\u003dCONTROLLER:65535\n cookie\u003d0x0, duration\u003d17.261s, table\u003d0, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:20\n cookie\u003d0x0, duration\u003d17.261s, table\u003d20, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:30\n cookie\u003d0x0, duration\u003d17.261s, table\u003d30, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:31\n cookie\u003d0x0, duration\u003d17.261s, table\u003d31, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dresubmit(,39),resubmit(,40)\n cookie\u003d0x0, duration\u003d17.259s, table\u003d40, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:50\n cookie\u003d0x0, duration\u003d17.249s, table\u003d50, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:60\n cookie\u003d0x0, duration\u003d17.237s, table\u003d60, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:70\n cookie\u003d0x0, duration\u003d17.229s, table\u003d70, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:80\n cookie\u003d0x0, duration\u003d17.220s, table\u003d80, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:90\n cookie\u003d0x0, duration\u003d17.212s, table\u003d90, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:100\n cookie\u003d0x0, duration\u003d17.205s, table\u003d100, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:105\n cookie\u003d0x0, duration\u003d17.261s, table\u003d105, n_packets\u003d0, n_bytes\u003d0, reg0\u003d0x2 actions\u003dlearn(table\u003d110,hard_timeout\u003d300,priority\u003d16400,NXM_NX_TUN_ID[],NXM_OF_ETH_DST[]\u003dNXM_OF_ETH_SRC[],output:NXM_OF_IN_PORT[]),goto_table:110\n cookie\u003d0x0, duration\u003d17.195s, table\u003d105, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003dgoto_table:110\n cookie\u003d0x0, duration\u003d17.183s, table\u003d110, n_packets\u003d0, n_bytes\u003d0, priority\u003d0 actions\u003ddrop",
      "parentUuid": "3a65312a_2c0d6791",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_3cb63c3e",
        "filename": "openstack/utils/netvirt-it-utils/src/main/java/org/opendaylight/netvirt/utils/netvirt/it/utils/NetvirtItUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 223,
      "author": {
        "id": 773
      },
      "writtenOn": "2016-11-03T19:04:03Z",
      "side": 1,
      "message": "spelling, operational\n\nalso aren\u0027t these logs verbose? Do they really help? I guess it is nice to see all the current flows.",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_1bac23a0",
        "filename": "openstack/utils/netvirt-it-utils/src/main/java/org/opendaylight/netvirt/utils/netvirt/it/utils/NetvirtItUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 223,
      "author": {
        "id": 4018
      },
      "writtenOn": "2016-11-04T11:48:53Z",
      "side": 1,
      "message": "Sam, this will help what is written in an operational data store. and once finding the current cause of the error we will optimize this log statement.",
      "parentUuid": "3a65312a_3cb63c3e",
      "revId": "929be24bdd0a56b49632065f3aa9c8b150e25480",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}