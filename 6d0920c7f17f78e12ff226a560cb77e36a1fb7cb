{
  "comments": [
    {
      "key": {
        "uuid": "3a65312a_b6bec7fd",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ModifyVpnFootprintTask.java",
        "patchSetId": 32
      },
      "lineNbr": 115,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-11T18:42:19Z",
      "side": 1,
      "message": "where is this used?",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_02de566d",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ModifyVpnFootprintTask.java",
        "patchSetId": 32
      },
      "lineNbr": 115,
      "author": {
        "id": 5350
      },
      "writtenOn": "2016-11-14T19:11:30Z",
      "side": 1,
      "message": "nowhere I think. This is just an offered API in case some client wants to use it.",
      "parentUuid": "3a65312a_b6bec7fd",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_56c1337f",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ModifyVpnFootprintTask.java",
        "patchSetId": 32
      },
      "lineNbr": 215,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-11T18:42:19Z",
      "side": 1,
      "message": "can become true for multiple vpn interfaces on the same DPN.",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_42916e98",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ModifyVpnFootprintTask.java",
        "patchSetId": 32
      },
      "lineNbr": 215,
      "author": {
        "id": 5350
      },
      "writtenOn": "2016-11-14T19:11:30Z",
      "side": 1,
      "message": "I\u0027m not sure if that\u0027s possible if we make the reading and then the addition (or removal) both inside the synchronized block",
      "parentUuid": "3a65312a_56c1337f",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_96bbcb0d",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/ModifyVpnFootprintTask.java",
        "patchSetId": 32
      },
      "lineNbr": 263,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-11T18:42:19Z",
      "side": 1,
      "message": "can become true for multiple interfaces on the same DPN..",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_36f477f1",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 32
      },
      "lineNbr": 576,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-11T18:42:19Z",
      "side": 1,
      "message": "We see that the management of DpnToVpnList asynchronous to the Binding Interface and VRFEntry creation here...\n\nWhen multiple interfaces are landing on the same DPN, the key serializes execution of modifyVpnFootPrintTask.  However, each task is unique and it seems to maintain its own firstDpnonVpn and lastDpnOnVpn.  So it is quite possible that populateFibOnNewDpn is executed more than once..  The same would apply to cleanUpFibOnDpn case as well.\n\nOn another note, we have encountered problems where the DPNToVpnList is mismanaged during bulk deletion of VMs followed by bulk addition (bringing them to 0 and then bringning them back to no of VMs initially there) in a 3-PL environemtn with the VMs dispersed across the PLs. Can you please make sure that TC works for this review?",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_0273f680",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 32
      },
      "lineNbr": 576,
      "author": {
        "id": 5350
      },
      "writtenOn": "2016-11-14T19:11:30Z",
      "side": 1,
      "message": "As mentioned in the other comment, reading VpnToDpn map from storage and then updating it *synchronously*, both operations inside the same synchronized block, ensures that only one of the ModifyVpnFootprint objects will see its \u0027lastDpn\u0027 or firstDpn\u0027 set to true. \n\nRegarding your note, I thought all DCNs of the same type landed on the same PL. Isn\u0027t that right?",
      "parentUuid": "3a65312a_36f477f1",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_1cc4fd5d",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 32
      },
      "lineNbr": 582,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-12T03:40:01Z",
      "side": 1,
      "message": "Can we pleas retain synchronicity here by direct method calls instead of a DJC within a DJC..\n\nUsually a DJC within a DJC reduces performance instead of retaining it .",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_cb83d902",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 32
      },
      "lineNbr": 582,
      "author": {
        "id": 5350
      },
      "writtenOn": "2016-11-14T19:11:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3a65312a_1cc4fd5d",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_db360e03",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 32
      },
      "lineNbr": 803,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-11T18:42:19Z",
      "side": 1,
      "message": "is this function used?",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_e26d1a9b",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 32
      },
      "lineNbr": 803,
      "author": {
        "id": 5350
      },
      "writtenOn": "2016-11-14T19:11:30Z",
      "side": 1,
      "message": "looks like it doesn\u0027t",
      "parentUuid": "3a65312a_db360e03",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a65312a_bb587257",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnOpDataSyncer.java",
        "patchSetId": 32
      },
      "lineNbr": 99,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-11-11T18:42:19Z",
      "side": 1,
      "message": "If a thread is woken up by an InterrupException,, i am not sure if its right to assume that the required data is available?",
      "revId": "6d0920c7f17f78e12ff226a560cb77e36a1fb7cb",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}