{
  "comments": [
    {
      "key": {
        "uuid": "ba1f61a0_a2476b4a",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 69
      },
      "lineNbr": 741,
      "author": {
        "id": 6154
      },
      "writtenOn": "2017-08-23T12:19:23Z",
      "side": 1,
      "message": "Still the problem is not solved here:\n\nSay router (say Router-1) is having two subnets (IPv4 and IPv6). Remove one of the subnet (say IPv6). Then handleRouterInterfaceRemoved () -\u003e removeSubnetFromVpn() -\u003ewithdrawPortIpFromVpnIface(). PortIps will have both IPv4 and IPv6 address. IPv6 address which is part of IPv6 subnet being removed , VpnPortipToPort entry is removed. For IPv4 address , isIpFromAnotherSubnet flag is set as TRUE.\n\nWhere are you updating the VpnInterface ? VpnInterface adjacency list needs to be updated by removing the IPv6 adjacency, as IPv6 subnet is being removed.",
      "revId": "ff65590547ac84f2ecf338f0afb23b13ca949a0b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba1f61a0_d886ce64",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 69
      },
      "lineNbr": 741,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-08-23T15:11:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba1f61a0_a2476b4a",
      "revId": "ff65590547ac84f2ecf338f0afb23b13ca949a0b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba1f61a0_e2c043e2",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 69
      },
      "lineNbr": 1264,
      "author": {
        "id": 6154
      },
      "writtenOn": "2017-08-23T12:19:23Z",
      "side": 1,
      "message": "addToNeutronRouterInterfacesMap should not be called here. Its wrong. In this method addSubnetToVpn() , we are iterating over portList which will not contain router-interface-port.\n\naddToNeutronRouterInterfacesMap() and createvpnInterface() for router-interface-port is already done outside addSubnetToVpn().",
      "revId": "ff65590547ac84f2ecf338f0afb23b13ca949a0b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba1f61a0_3d6f1cff",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 69
      },
      "lineNbr": 1264,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-08-23T13:46:12Z",
      "side": 1,
      "message": "I\u0027m not agree with you at point, that here we will iterate  over portList, which does not contain router-interface-port. \n\nI don\u0027t see in NeutronPortChangeListener.handleRouterInterfaceAdded(),  that we call any other function, which will call independently addToNeutronRouterInterfacesMap(). \n\nIn NeutronPortChangeListener.handleRouterInterfaceAdded() we call addSubnetToVpn(), hence subnet, which will be passed as an argument there will contain router-interface-port ?\n\nWould you be so kind and clarify this point again from your side, please ?",
      "parentUuid": "ba1f61a0_e2c043e2",
      "revId": "ff65590547ac84f2ecf338f0afb23b13ca949a0b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba1f61a0_c42f08f5",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 69
      },
      "lineNbr": 1264,
      "author": {
        "id": 6154
      },
      "writtenOn": "2017-08-24T09:35:38Z",
      "side": 1,
      "message": "Inside handleRouterInterfaceAdded method , createVpnInterface is called for routerPort  Inside createVpnInterface() at the bottom, addToNeutronRouterInterfacesMap is called where routerPort is added.\n\nAfter createVpnInterface, addSubnetToVpn() is called where ports inside a subnetmap are iterated over. portList contains only the VM ports , but not the routerPort.\n\nHence my above comments still hold good. So please change the code accordingly.",
      "parentUuid": "ba1f61a0_3d6f1cff",
      "revId": "ff65590547ac84f2ecf338f0afb23b13ca949a0b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}