{
  "comments": [
    {
      "key": {
        "uuid": "e2d266c3_0587ff40",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-12-11T21:47:32Z",
      "side": 1,
      "message": "Sorry but I\u0027m not following you here yet - to avoid perpetuating which circular bundle dependencies?  What am I missing if I say that, for the purpose of this change, L2GatewayCacheImpl really could just be put into neutronvpn-impl, without creating a new bundle?  Or is doing this a first step to do more after and subsequently reduce some circular bundle dependencies?  Because this change does not actually seem to remove any dependencies; as far as I gathered, your removal of optional availability on reference import in this change is actually unrelated to having put L2GatewayCacheImpl in a new bundle.  It\u0027s possible that I\u0027m missing something.",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18c9f7eb_6a23aa7e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-12-11T22:10:37Z",
      "side": 1,
      "message": "elanmanager-impl needs L2GatewayCache so If I put the impl in neutronvpn-impl, the elanmanager.xml would need to optionally \u003creference\u003e it.  You\u0027ve stated that you would prefer to eliminate  optional references so I\u0027m trying not to perpetuate it here. However I\u0027m OK either way if you\u0027d rather not introduce the new bundle.\n\nBTW - I could also move InterVpnLinkCacheImpl to cache-impl and eliminate another InterVpnLinkCacheImpl that I recently had to introduce.",
      "parentUuid": "e2d266c3_0587ff40",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7e10f63e_47d737c5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-12-18T15:17:17Z",
      "side": 1,
      "message": "yeah no lets avoid optional \u003creference\u003e at all cost; it\u0027s confusing and can \"hide\" start-up errors and could \"misinform\" infrautils.ready and infrautils.diagstatus.  \n\nBut the fact that we need a new bundle just for the cache is probably an indication of a bigger design issue, no? Like if both neutronvpn-impl as well as elanmanager-impl need L2GatewayCache, then... should it perhaps be exposed by either or the other -api? Not sure this makes sense, but something doesn\u0027t seem quite right if we have to introduce a new cache/ bundle.\n\nHaving said that, I don\u0027t want to stand in the way of getting this in as intermediate solution, so I\u0027l +1 it despite some reservation that this is the ideal best later solution.",
      "parentUuid": "18c9f7eb_6a23aa7e",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2edafbda_e03d5a43",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-12-18T15:42:57Z",
      "side": 1,
      "message": "I hear ya. Unfortunately, neutronvpn-impl, elanmanager-impl, vpnmanager-impl et al are all coupled, ie they use each other\u0027s services so putting things like shared caches in any of them introduces optional references for the others. I\u0027m not crazy about the cache-impl but I don\u0027t know any other solution at this point to avoid optional references.  Perhaps there should be an l2gateway bundle with this cache and other classes as well. I think it\u0027s pretty clear that this code base needs to be re-organized but I don\u0027t know it nearly enough to be able to attempt that. \n\nAs I mentioned before, I\u0027m fine with putting the cache in neutronvpn-imp and adding an optional reference in elanmanager-impl. We already have other optional references so adding another probably doesn\u0027t really matter much at this point.  To fix the others would mean major re-org and splitting out more bundles so perhaps it would be better to wait until (if) that happens, especially since we\u0027re really not completely comfortable with cache-impl. Sam - what do you think?",
      "parentUuid": "7e10f63e_47d737c5",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd0e7485_d96e621f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-12-19T04:58:00Z",
      "side": 1,
      "message": "Just to clarify: I\u0027ve actually +1 and am FOR this going in as-is so that we can remove the optional \u003creference\u003e as that seems to me to be the lesser of two evils; I *really* don\u0027t like th optional references, as they can \"hide\" start-up errors and could \"misinform\" infrautils.ready and infrautils.diagstatus.",
      "parentUuid": "2edafbda_e03d5a43",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a696c459_aa75126e",
        "filename": "vpnservice/cache/impl/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-12-11T21:47:32Z",
      "side": 1,
      "message": "nit: I usually put this right after \u003cproject\u003e before \u003cparent\u003e",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "113c0c7e_2d26467a",
        "filename": "vpnservice/cache/impl/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-12-11T22:10:37Z",
      "side": 1,
      "message": "sure. I had copied this from another project.",
      "parentUuid": "a696c459_aa75126e",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa65d456_b9cbe96f",
        "filename": "vpnservice/cache/impl/src/main/java/org/opendaylight/netvirt/cache/impl/l2gw/L2GatewayCacheImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-12-11T21:47:32Z",
      "side": 1,
      "message": "if such a new bundle really is needed (see other comment first), would it not be clearer to create something like vpnservice/neutronvpn/neutronvpn-cache instead of vpnservice/cache/impl ?  The latter seems much too \"top level\", to me.",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c612152a_d9fd4ff6",
        "filename": "vpnservice/cache/impl/src/main/java/org/opendaylight/netvirt/cache/impl/l2gw/L2GatewayCacheImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-12-11T22:10:37Z",
      "side": 1,
      "message": "This could be used to house other cache implementations like InterVpnLinkCacheImpl that are used across sub-projects so I was trying to keep this generic. The other option is to put each cache implementation into its own bundle but that seems like overkill IMO. \n\nAgain the bundle really isn\u0027t needed and I can remove it if you\u0027re against it but we have no hope of eliminating circular bundle references unless we start splitting things into separate bundles.",
      "parentUuid": "aa65d456_b9cbe96f",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b23df81_871896b9",
        "filename": "vpnservice/cache/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-12-11T21:47:32Z",
      "side": 1,
      "message": "nit: I usually put this right after \u003cproject\u003e before \u003cparent\u003e",
      "revId": "f82ff21294a7afed286890da6d9ca13fa54f4fb4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}