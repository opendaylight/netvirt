{
  "comments": [
    {
      "key": {
        "uuid": "da01753e_5b5b4187",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/evpn/utils/ElanEvpnUtils.java",
        "patchSetId": 11
      },
      "lineNbr": 54,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-04-11T12:42:46Z",
      "side": 1,
      "message": "this can\u0027t be final because of the WaitingServiceTracker block below",
      "parentUuid": "da01753e_5b46a2c0",
      "revId": "f08a00bc73fcbb341d027e1633b84614aad8f69b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da01753e_e7a08ff6",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/evpn/utils/ElanEvpnUtils.java",
        "patchSetId": 11
      },
      "lineNbr": 54,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-04-12T14:10:46Z",
      "side": 1,
      "message": "Peri, can you explain more on this? This pattern has been used for a while so we can change it, but I would like to change the other instances also with the right change.",
      "parentUuid": "da01753e_de20bff9",
      "revId": "f08a00bc73fcbb341d027e1633b84614aad8f69b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da01753e_c9abd91c",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/evpn/utils/ElanEvpnUtils.java",
        "patchSetId": 11
      },
      "lineNbr": 54,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-04-13T14:55:18Z",
      "side": 1,
      "message": "Good, we can use this elsewhere also",
      "parentUuid": "da01753e_d3d54d44",
      "revId": "f08a00bc73fcbb341d027e1633b84614aad8f69b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da01753e_db4e11c1",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/evpn/utils/ElanEvpnUtils.java",
        "patchSetId": 11
      },
      "lineNbr": 62,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-04-11T12:42:46Z",
      "side": 1,
      "message": "Yes, this is to break the cycle. The problem is the vpnmanager interface takes elan (or neutronvpn, natservice) also and eventually you hit a cycle. That is what was failing the sft. elanmanager blueprint requires a reference to vpnmanager and vpnmanager has a reference for elanmanager so neither comes up.\n\nWe use this trick in a couple other places. Remove the vpnmanager reference from elanmanager blueprint so that these classes come up, in the background spin up a thread waiting for the vpnmanager. It is not ideal since the real problem is not fixed - which is that the code is architecturally wrong. We have been just dumping tons of methods into the single interfaces from the services rather than pulling them up to individual classes.\n\nI have the patch below to try to break this cycle by creating an interface just for the methods elanmanager needs from vpnutils but it is having issues. So I think we are fine to commit this patch with the waiting service tracker and work on breaking these cycles later. I think the other EVPN_RT2 patch suffers this same problem, but I haven\u0027t had a chance to look at it yet.\n\nhttps://git.opendaylight.org/gerrit/#/c/54738/",
      "parentUuid": "da01753e_bb122eb2",
      "revId": "f08a00bc73fcbb341d027e1633b84614aad8f69b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da01753e_ec96ab93",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/evpn/utils/ElanEvpnUtils.java",
        "patchSetId": 11
      },
      "lineNbr": 70,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-04-13T14:55:18Z",
      "side": 1,
      "message": "Yes, please.",
      "parentUuid": "da01753e_9bf3ea72",
      "revId": "f08a00bc73fcbb341d027e1633b84614aad8f69b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da01753e_fbccb537",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/evpn/utils/EvpnUtils.java",
        "patchSetId": 11
      },
      "lineNbr": 40,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-04-11T12:42:46Z",
      "side": 1,
      "message": "like the other comment, this can\u0027t be final",
      "parentUuid": "da01753e_1b741ace",
      "revId": "f08a00bc73fcbb341d027e1633b84614aad8f69b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}