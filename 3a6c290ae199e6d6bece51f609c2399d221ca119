{
  "comments": [
    {
      "key": {
        "uuid": "da2a55be_4537994e",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 402,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-27T13:26:14Z",
      "side": 1,
      "message": "Please ignore my previous comments on this if condition. This is very much required:)",
      "range": {
        "startLine": 402,
        "startChar": 41,
        "endLine": 402,
        "endChar": 69
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_e09f9bb2",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 402,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-07-27T14:18:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "da2a55be_4537994e",
      "range": {
        "startLine": 402,
        "startChar": 41,
        "endLine": 402,
        "endChar": 69
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_653bbd38",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 465,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-27T13:26:14Z",
      "side": 1,
      "message": "Is this parameter required?",
      "range": {
        "startLine": 465,
        "startChar": 58,
        "endLine": 465,
        "endChar": 66
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_40a7870c",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 465,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-07-27T14:18:10Z",
      "side": 1,
      "message": "Yes we use this method in handleNeutronPortUpdated method",
      "parentUuid": "da2a55be_653bbd38",
      "range": {
        "startLine": 465,
        "startChar": 58,
        "endLine": 465,
        "endChar": 66
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba1f61a0_88c63748",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 465,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-31T09:12:08Z",
      "side": 1,
      "message": "I meant the \"final Port port\" argument. I dont see it being used in this method. If not required, please remove it.",
      "parentUuid": "da2a55be_40a7870c",
      "range": {
        "startLine": 465,
        "startChar": 58,
        "endLine": 465,
        "endChar": 66
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_c521c9fc",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 468,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-27T13:26:14Z",
      "side": 1,
      "message": "please ensure that sn.getVpnId() !\u003d null",
      "range": {
        "startLine": 468,
        "startChar": 19,
        "endLine": 468,
        "endChar": 49
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_60928ba0",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 468,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-07-27T14:18:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "da2a55be_c521c9fc",
      "range": {
        "startLine": 468,
        "startChar": 19,
        "endLine": 468,
        "endChar": 49
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_854071a6",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 472,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-27T13:26:14Z",
      "side": 1,
      "message": "Move this method to NeutronVpnUtils",
      "range": {
        "startLine": 465,
        "startChar": 4,
        "endLine": 472,
        "endChar": 5
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_c091b79a",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 472,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-07-27T14:18:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "da2a55be_854071a6",
      "range": {
        "startLine": 465,
        "startChar": 4,
        "endLine": 472,
        "endChar": 5
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_4022e7a4",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 510,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-27T13:26:14Z",
      "side": 1,
      "message": "should we not handle the case where oldvpnId\u003d\u003dnewVpnId?\nthis will occur if the fixedIp was updated to be a different IP in the same subnet.",
      "range": {
        "startLine": 494,
        "startChar": 11,
        "endLine": 510,
        "endChar": 13
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_2081b34a",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 510,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-07-27T14:18:10Z",
      "side": 1,
      "message": "We doesn\u0027t support two IP from a same subnet for a neutron port. Please, see dualstack specification [0]\n\n[0] https://git.opendaylight.org/gerrit/#/c/54089/",
      "parentUuid": "da2a55be_4022e7a4",
      "range": {
        "startLine": 494,
        "startChar": 11,
        "endLine": 510,
        "endChar": 13
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_9ee8bf11",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 510,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-07-28T06:39:18Z",
      "side": 1,
      "message": "It wont be two IP from the same subnet:). Neutron allows you to update a fixedIp belonging to a subnet to a different fixedIp on the same subnet. After the update, the port will have a fixed IP from the same subnet, the the IP will be different. THis will come as an update to NeutronPortChangeListener. Is there any reason why we should not be handling this scenario?",
      "parentUuid": "da2a55be_2081b34a",
      "range": {
        "startLine": 494,
        "startChar": 11,
        "endLine": 510,
        "endChar": 13
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da2a55be_e1383ca2",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java",
        "patchSetId": 21
      },
      "lineNbr": 510,
      "author": {
        "id": 7194
      },
      "writtenOn": "2017-07-28T10:25:43Z",
      "side": 1,
      "message": "Yes, thanks, you are right. We should handle this scenario. And we handle it in the patch set [0]: \n\nfor ANY port update event we will do following steps in handleNeutronPortUpdated method: \n\n1. we call nvpnManager.removePortsFromSubnetmapNode for each subnetId of obsoleted port (portoriginal)\n\n2. we delete VPNinterface, if VPNid is present for obsoleted port network\n\n3. nvpnManager.updateSubnetmapNodeWithPorts for each subnetId of updated port (portupdate)\n\n4. we create VPNinterface for updated port, if VPNid exists for its network\n\nso, yes, we don\u0027t care explicitly if newVpnID \u003d odlVpnID, in all update cases we will make only these 4 steps. \n\nMaybe, in some cases like yours this solution will be redundant, than an algorithm with  ports FixedIplists comparison + VPNIds comparison, but it seems to be more simply and universal in my opinion.\n\n\n[0] https://git.opendaylight.org/gerrit/#/c/60246/28/vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronPortChangeListener.java@462",
      "parentUuid": "da2a55be_9ee8bf11",
      "range": {
        "startLine": 494,
        "startChar": 11,
        "endLine": 510,
        "endChar": 13
      },
      "revId": "3a6c290ae199e6d6bece51f609c2399d221ca119",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}