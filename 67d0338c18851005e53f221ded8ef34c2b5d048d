{
  "comments": [
    {
      "key": {
        "uuid": "9a245df4_41832c56",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 10,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:23:25Z",
      "side": 1,
      "message": "In the two router solution, the VM would still have a single NIC (with an IPv4 and IPv6 address) right? Or are we talking about having two separate NICs in the VM?",
      "range": {
        "startLine": 9,
        "startChar": 12,
        "endLine": 10,
        "endChar": 6
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_64a3de4f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 10,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:54:57Z",
      "side": 1,
      "message": "we have a single NIC, but the fact is because we have 2 potential gateways, we initially send packet to ipv6 router to the IPv6 gateway.\nIf the IPv6 gateway is not sent, a fallback rule will be written so that traffic that is not eligible to IPv6 gateway will go to the IPv4 gatewy",
      "parentUuid": "9a245df4_41832c56",
      "range": {
        "startLine": 9,
        "startChar": 12,
        "endLine": 10,
        "endChar": 6
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_a1aae8cf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:23:25Z",
      "side": 1,
      "message": "Are we resubmitting from Table 19 back to Table19?",
      "range": {
        "startLine": 13,
        "startChar": 10,
        "endLine": 14,
        "endChar": 8
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_a4ab161d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:54:57Z",
      "side": 1,
      "message": "It seems there is already some resubmit rule that could be used:\n[stack@controller-deray ~]\u003e sudo ovs-ofctl -Oopenflow13 dump-flows\nbr-int | grep 108000\n cookie\u003d0x1080000, duration\u003d84850.985s, table\u003d19, n_packets\u003d5,\nn_bytes\u003d450, priority\u003d0 actions\u003dresubmit(,17)\n\nI think this is done by createTableMissForVpnGwFlow() function.",
      "parentUuid": "9a245df4_a1aae8cf",
      "range": {
        "startLine": 13,
        "startChar": 10,
        "endLine": 14,
        "endChar": 8
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_db538137",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-25T12:19:14Z",
      "side": 1,
      "message": "Right. The statement was a bit confusing. It says its resubmitted from 19 to 19. Whereas its going from 17-\u003e 19 (no match found) -\u003e 17 -\u003e 19.",
      "parentUuid": "9a245df4_a4ab161d",
      "range": {
        "startLine": 13,
        "startChar": 10,
        "endLine": 14,
        "endChar": 8
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_c1139c5a",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 215,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:11:17Z",
      "side": 1,
      "message": "vpnInterface YANG model has the name as the key right. So, how can we have multiple entries? Can you please clarify.",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_e467ceb5",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 215,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:03:44Z",
      "side": 1,
      "message": "multiples entries is related to the vpnInstanceNames List that is available for each VPN Interface.\nby doinf the for loop, I parse the list of the potential Vpn Instances available.",
      "parentUuid": "9a245df4_c1139c5a",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_3bbd7d69",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 215,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-25T12:19:14Z",
      "side": 1,
      "message": "Ok understood. In one of your dependent patches, you updated the YANG model. I was looking at the current \"l3vpn:vpn-interfaces\" YANG which is not a list",
      "parentUuid": "9a245df4_e467ceb5",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_a13ca8c0",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 229,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:11:17Z",
      "side": 1,
      "message": "So are we doing multiple Service Bindings for the same interface now?",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6413de0d",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 229,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:03:44Z",
      "side": 1,
      "message": "Indeed, there may be 2 service bindings.\nBut the 2nd service binding will be a fallback, in case the packet that goes to table 17 and 19 does not find any entries. \n\n\n\nwhen a packet from a VM wants to reach one of the available VPN instances, there are several cases:\n- there is only one VPN instance ( case single router).\nin that case, 1 service binding will be done.\n\n- there are more than 1 VPN instance.\n  - case 1 : one is a BGPVPN internet VPN instance. That one is specific and does not rely on a service binding.\n  - case 2 : it stands for two VPN instances (two routers for example). Then, 2 service bindings should be done so that both IPv4 and IPv6 packets should go to the correct router.",
      "parentUuid": "9a245df4_a13ca8c0",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_1bc079df",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 229,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-25T12:19:14Z",
      "side": 1,
      "message": "Ok thanks.",
      "parentUuid": "9a245df4_6413de0d",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6172b0ae",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 300,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:11:17Z",
      "side": 1,
      "message": "What does this arbitrateProvision mean? When do we hit this condition?",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_24a566b5",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnInterfaceManager.java",
        "patchSetId": 6
      },
      "lineNbr": 300,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:03:44Z",
      "side": 1,
      "message": "this case happens when we have two router setup.\nupon associating/disassociating BGPVPN, and router-interface-add/delete, more or less VPNInstances will be in the list for each Vpn Interface.\nWhen we are on the case where we have 2 VPN instances ( case router), then we have to provision those 2 entries, because we assume that there is an ipv6 router and an ipv4 router.",
      "parentUuid": "9a245df4_6172b0ae",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_2103980e",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnUtil.java",
        "patchSetId": 6
      },
      "lineNbr": 1913,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:11:17Z",
      "side": 1,
      "message": "A vpnInstanceOpDataEntry may not have an IPAddress right?\nIn such situations, we would return IpVersionChoice.UNDEFINED.\n\nBut in the calling context, you are not handling this situation (basically its treated as IPv6). Is this intentional?",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_44897a25",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnUtil.java",
        "patchSetId": 6
      },
      "lineNbr": 1913,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:03:44Z",
      "side": 1,
      "message": "indeed, I expect a VPN ( type router) to be connected to ipv4 subnets only,or to ipv6 subnets only, or none ( in that case, it is undefined).\nThis function will permit avoiding performing arbitrary choice, because we may know which router is IPv6 and which router is IPv4.\nThis will permit maximising the tx traffic, when the packet will leave the VM with the vpnid\u003dipv6 router first.",
      "parentUuid": "9a245df4_2103980e",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_bb5e8d43",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnUtil.java",
        "patchSetId": 6
      },
      "lineNbr": 1913,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-25T12:19:14Z",
      "side": 1,
      "message": "Ok. But my question is that in VpnInterfaceManager, API updateBindServices you are invoking getVpnType and not handling the UNDEFINED case. So, is this intentional?",
      "parentUuid": "9a245df4_44897a25",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_3e7d66e8",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnUtil.java",
        "patchSetId": 6
      },
      "lineNbr": 1913,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-26T11:17:13Z",
      "side": 1,
      "message": "it is intentional.\n\nas far as I understand the code, the updateBindService comes only after add has been invoked.\nThat means that at least one bindService has been created.\n\nupdateBindService is here to add a new VPN Interface. So the question is, do we have to add for that VpnInterface a new service to bind.\n\nso the undefined case should do nothing.",
      "parentUuid": "9a245df4_bb5e8d43",
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_bd168a53",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnUtil.java",
        "patchSetId": 6
      },
      "lineNbr": 1918,
      "author": {
        "id": 5197
      },
      "writtenOn": "2017-10-24T10:11:17Z",
      "side": 1,
      "message": "this should be IPV6.",
      "range": {
        "startLine": 1918,
        "startChar": 33,
        "endLine": 1918,
        "endChar": 53
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_64af5e95",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnUtil.java",
        "patchSetId": 6
      },
      "lineNbr": 1918,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-24T14:03:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a245df4_bd168a53",
      "range": {
        "startLine": 1918,
        "startChar": 33,
        "endLine": 1918,
        "endChar": 53
      },
      "revId": "67d0338c18851005e53f221ded8ef34c2b5d048d",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}