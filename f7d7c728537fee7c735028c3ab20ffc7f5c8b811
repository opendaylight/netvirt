{
  "comments": [
    {
      "key": {
        "uuid": "fafc7978_cf408ea7",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 856
      },
      "writtenOn": "2017-02-28T17:53:48Z",
      "side": 1,
      "message": "Is the use of VXGPE or VXLAN as the SFC encapsulation independent of the classification API?\nThat is, will this classifier support both types of encapsulation?  and, does the encapsulation type get taken/derived from the RSP?",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_60e36ca4",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-03-01T09:53:06Z",
      "side": 1,
      "message": "Yes, the SFC encapsulation is independent of the classification API. The encapsulation will be taken from the first SFF in the chain, which is obtained via the RSP. The classifier will ultimately support both Vxgpe and Vxlan, but first only Vxgpe+NSH, since we havent implemented Vxlan in SFC yet.",
      "parentUuid": "fafc7978_cf408ea7",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_ef48f2b4",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 856
      },
      "writtenOn": "2017-02-28T17:53:48Z",
      "side": 1,
      "message": "SFC can render to VPP nodes - but I suppose Netvirt will also need VPP support before the classifier can direct traffic to chains rendered on VPP nodes. (an effort beyond the scope of this spec no doubt)\n\nPerhaps it would be good to briefly clarify the scope of supported southbound nodes types.",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_80f5b058",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-03-01T09:53:06Z",
      "side": 1,
      "message": "That\u0027s a good point. Actually, it should be possible to have a hybrid setup, where Netvirt is on OVS, and SFC is on VPP. That is indeed beyond the scope, but I can add a comment to clarify this.",
      "parentUuid": "fafc7978_ef48f2b4",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_4d9cb10f",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 70,
      "author": {
        "id": 670
      },
      "writtenOn": "2017-02-27T13:12:18Z",
      "side": 1,
      "message": "According to this it will just be logic added straight into the aclservice?\n\nAfter reading the spec, since there are no yang changes at all and you\u0027re proposing on using the ACL service for this, what are the actual proposed changes in netvirt?\n\nToday the ACL service either drops the packet, or forwards it back to the genius dispatcher.\nAre you proposing adding a new action for the packet from the ACL service? Or marking some metadata bits in addition to allowing and having Genius insert the packet into a new SFC service (not included in this spec)?\n\nWill these changes be a generic enhancement to the ACL service to do other actions such as metadata marking for other services? Or will there be a specific SFC related functionality?",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1853093a",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 70,
      "author": {
        "id": 6773
      },
      "writtenOn": "2017-02-27T15:38:09Z",
      "side": 1,
      "message": "I have a similar concern: I don\u0027t believe that the ACL for SFC and SG can be combined since there could be a contradiction where SG doesn\u0027t allow forwarding (by lack of forwarding rule or by specific forwarding ruel, e.g. 192.168/24 and port 22) but SFC does (e.g. by a less specific rule: 192.168/24 without port restriction).",
      "parentUuid": "fafc7978_4d9cb10f",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_54eb9512",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 70,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "Please see my response to Alon above.",
      "parentUuid": "fafc7978_1853093a",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_d497858e",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 70,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "Sam suggested this path, but this will be new code, so the code path will need to be changed. What we\u0027re going to do is create a new classifier service in Genius (details coming in next patch-set). That way we wont \"clash\" with the existing SG aclservice.\nAlso, I understood that there were no API changes needed, but I will check with Sam about that too to make sure the ACL data-model used has the needed augmentations for SFC.",
      "parentUuid": "fafc7978_4d9cb10f",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_2da84d1f",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 670
      },
      "writtenOn": "2017-02-27T13:12:18Z",
      "side": 1,
      "message": "typo netvirt",
      "range": {
        "startLine": 98,
        "startChar": 28,
        "endLine": 98,
        "endChar": 34
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_b494818b",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_2da84d1f",
      "range": {
        "startLine": 98,
        "startChar": 28,
        "endLine": 98,
        "endChar": 34
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_0fef36ea",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 106,
      "author": {
        "id": 5255
      },
      "writtenOn": "2017-02-28T17:05:11Z",
      "side": 1,
      "message": "I would say it is better to use a different service than the one used today to check the priority for ACL-Security Groups in Genius dispatcher table (Genius pipeline)\nOne option is as you say using a new service (ACL-Classifier), but another option (not so smart) is using SFC Service. Apparently Classifier and SFC shall never collide at least while we use NSH. Maybe when introducing VxLAN encapsulation we might have some collisions between the classifer and SFC.",
      "range": {
        "startLine": 106,
        "startChar": 31,
        "endLine": 106,
        "endChar": 37
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5a70cd71",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 106,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-03-02T09:55:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_0fef36ea",
      "range": {
        "startLine": 106,
        "startChar": 31,
        "endLine": 106,
        "endChar": 37
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_f8b0c544",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-27T13:52:05Z",
      "side": 1,
      "message": "Please take a look at this spec https://git.opendaylight.org/gerrit/#/c/51457 it proposes something quite similar for policy classifications over ACE matches/actions\n\nmaybe it can be extended to cover SFC classifications so code and models can be shared?",
      "range": {
        "startLine": 105,
        "startChar": 8,
        "endLine": 107,
        "endChar": 50
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7aeaf1db",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-03-02T09:55:46Z",
      "side": 1,
      "message": "We will end up creating a new Classifier service in Genius. Details coming in the next patch set.",
      "parentUuid": "fafc7978_f8b0c544",
      "range": {
        "startLine": 105,
        "startChar": 8,
        "endLine": 107,
        "endChar": 50
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_8d7fb965",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 6419
      },
      "writtenOn": "2017-02-27T11:55:46Z",
      "side": 1,
      "message": "the first service function in the chain, not just \u0027a\u0027 service function.\n\nOr are you doing reclassification in every hop?",
      "range": {
        "startLine": 121,
        "startChar": 41,
        "endLine": 121,
        "endChar": 42
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_148e2d79",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_8d7fb965",
      "range": {
        "startLine": 121,
        "startChar": 41,
        "endLine": 121,
        "endChar": 42
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_cd94218d",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 6419
      },
      "writtenOn": "2017-02-27T11:55:46Z",
      "side": 1,
      "message": "Its.\n\nthat form is a contraction of it is or it has.",
      "range": {
        "startLine": 124,
        "startChar": 11,
        "endLine": 124,
        "endChar": 15
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_f48a8962",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_cd94218d",
      "range": {
        "startLine": 124,
        "startChar": 11,
        "endLine": 124,
        "endChar": 15
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_6deb7513",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 6419
      },
      "writtenOn": "2017-02-27T11:55:46Z",
      "side": 1,
      "message": "\"In scenarios where the service funcion...\" implies causality, which makes it easier to understand. I\u0027d change the \u0027if the ...\u0027 by \u0027in scenarios where\u0027.",
      "range": {
        "startLine": 130,
        "startChar": 0,
        "endLine": 130,
        "endChar": 28
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_34f091fd",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_6deb7513",
      "range": {
        "startLine": 130,
        "startChar": 0,
        "endLine": 130,
        "endChar": 28
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_8f0de6ea",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 5255
      },
      "writtenOn": "2017-02-28T17:05:11Z",
      "side": 1,
      "message": "Explain this is a different set of ITM tunnels than the ones currently used by Netvirt. As you say, for SFC we have to use vxlan-gpe, but Netvirt is using vxlan. As far as I know, it is not possible to change a VxLAN ITM tunnel to support GPE extension.\nOn the other hand, Netvirt is creating tunnels on demand and to my understanding SFC is expecting these set of tunnels is pre-created. If we follow this last approach for Netvirt classifier we are going to the general Netvirt approach, but on the other hand, it is easier to implement (maybe as a first step)",
      "range": {
        "startLine": 132,
        "startChar": 55,
        "endLine": 133,
        "endChar": 7
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_faa421bb",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-03-02T09:55:46Z",
      "side": 1,
      "message": "Via the SFC integration with Genius, SFC requests VXGPE tunnel creation via the ITM. I\u0027ll update the blueprint accordinly.",
      "parentUuid": "fafc7978_8f0de6ea",
      "range": {
        "startLine": 132,
        "startChar": 55,
        "endLine": 133,
        "endChar": 7
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_e02c6e9b",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 5255
      },
      "writtenOn": "2017-03-02T11:00:22Z",
      "side": 1,
      "message": "I might be wrong, but I thought that with the introduction of logical SFF it was assumed the ITM tunnels were created in advance, was that changed? I mean, with logical SFF, is SFC calling Genius to set the VxLAN-GPE tunnel everytime an SF is connected to logical SFF (if its the first SF in this switch)? and will SFC remove the VxLAN-GPE tunnel when there are no more SFs connected to a given switch?\nAs I said, I thought logical SFF was assuming there was a full mesh of ITM VxLAN tunnels created manually through Genius in advance.",
      "parentUuid": "fafc7978_faa421bb",
      "range": {
        "startLine": 132,
        "startChar": 55,
        "endLine": 133,
        "endChar": 7
      },
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_4d6af1ee",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 145,
      "author": {
        "id": 670
      },
      "writtenOn": "2017-02-27T13:12:18Z",
      "side": 1,
      "message": "It would really help to see some example flows of how an SFC packet flows through the ACL service with the proposed changes.",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_14f0ed8f",
        "filename": "docs/specs/new-sfc-classifier.rst",
        "patchSetId": 4
      },
      "lineNbr": 145,
      "author": {
        "id": 2039
      },
      "writtenOn": "2017-02-28T15:19:27Z",
      "side": 1,
      "message": "I\u0027ll do this in the next patch-set.",
      "parentUuid": "fafc7978_4d6af1ee",
      "revId": "f7d7c728537fee7c735028c3ab20ffc7f5c8b811",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}