{
  "comments": [
    {
      "key": {
        "uuid": "7a6b29fe_e86ddb99",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/ElanServiceProvider.java",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-18T06:37:18Z",
      "side": 1,
      "message": "Obviously this exception is being thrown to ODL blueprint and we don\u0027t know what would be behavior of it. At least if we swallow the exception and log the error here, we can come to know the problem is with elanmanager-impl bundle bootup and can get it corrected.",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_689b8b67",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/ElanServiceProvider.java",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 5703
      },
      "writtenOn": "2016-08-18T07:29:06Z",
      "side": 1,
      "message": "I think that the outcome is that the bundle will fail to start, and this is probably what we want here?",
      "parentUuid": "7a6b29fe_e86ddb99",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_7f27bc12",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/ElanServiceProvider.java",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-19T04:46:15Z",
      "side": 1,
      "message": "I am not sure what is the behavior of ODL bootup sequence now. Previously when we throw exceptions from DCN Handling (or) yang notification listeners, then the entire DCN and Yang notification handling thread gets terminated and then there won\u0027t be any DCN or Yang notifications for any applications.\nSo we have to see it doesn\u0027t start only elan  bundle (if exception is thrown from here) and proceed with starting other bundles.",
      "parentUuid": "7a6b29fe_689b8b67",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_88f547cd",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/InterfaceAddWorkerOnElanInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-18T06:37:18Z",
      "side": 1,
      "message": "Since this call method is invoked from DataStoreJobCoordinator, when exception is thrown to it, the job doesn\u0027t get retried again. If there are any exceptions while running this task, it has to be added into futures so that DJC can retry it again if it sees any failures in futures list.\nThis catch block is added to handle any unexpected exceptions like NullPointerException etc.",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_28919347",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/InterfaceAddWorkerOnElanInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5703
      },
      "writtenOn": "2016-08-18T07:29:06Z",
      "side": 1,
      "message": "Peri, DSJC calling code is:\ntry {\n                futures \u003d jobEntry.getMainWorker().call();\n            } catch (Exception e){\n                LOG.error(\"Exception when executing jobEntry: {}, exception: {}\", jobEntry, e.getStackTrace());\n                e.printStackTrace();\n            }\n\nSo it seems more reasonable that the caller of the task, i.e., DSJC, will decide what to do with a NPE, and not the task itself. With the current exception swallowing, DSJC can\u0027t even be aware of that.",
      "parentUuid": "7a6b29fe_88f547cd",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_bf2154fd",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/InterfaceAddWorkerOnElanInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-19T04:46:15Z",
      "side": 1,
      "message": "Okay. I am fine with throwing Exception to DSJC here.",
      "parentUuid": "7a6b29fe_28919347",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_f8eda226",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/internal/InterfaceAddWorkerOnElanInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5867
      },
      "writtenOn": "2016-08-19T15:57:25Z",
      "side": 1,
      "message": "Read this and am therefore leaving it unchanged as proposed.",
      "parentUuid": "7a6b29fe_bf2154fd",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_68cc2bbd",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/utils/ElanUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 1118,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-18T06:37:18Z",
      "side": 1,
      "message": "If we throw ElanException for just not able to program ELAN remote dmac flow entry, then we end up in not programming most of the entries for the elan interface from ElanInterfaceManager#setupEntriesForElanInterface. Atleast if this exception is swallowed here with logging proper error message and then proceed with other operations. This enables L2 packets takes broadcasting path to reach the destined VM.\n\nThis is the main idea of why Exception being swallowed here.",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_9f1c58c3",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/utils/ElanUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 1118,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-19T04:46:15Z",
      "side": 1,
      "message": "To be more elaborate: When internal transport is not established between DPN\u0027s, but elan interface is created on those DPN\u0027s then it is expected that exception is thrown from getInternalTunnelItmEgressAction(...) and program the remote dmac entry with empty instruction by swallowing the exception and proceed with programming other ELAN flows/groups for this specific elan interface.\nWhen ITM is created later between these DPNs, then remote dmac and remote bc group is updated with appropriate actions through Interface state DCN handling. \nHope now you understand why this exception is swallowed here.",
      "parentUuid": "7a6b29fe_68cc2bbd",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_98de2e6c",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/utils/ElanUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 1118,
      "author": {
        "id": 5867
      },
      "writtenOn": "2016-08-19T15:57:25Z",
      "side": 1,
      "message": "OK, thanks for your review and comment.  I\u0027ve changed it back to a LOG.error instead of rethrow in that case!  The LOG.error now correctly logs the root cause exception, and has a better message.",
      "parentUuid": "7a6b29fe_9f1c58c3",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_9073a214",
        "filename": "vpnservice/elanmanager/elanmanager-impl/src/main/java/org/opendaylight/netvirt/elan/utils/ElanUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 1766,
      "author": {
        "id": 5278
      },
      "writtenOn": "2016-08-22T08:37:55Z",
      "side": 1,
      "message": "The above comment is applicable here as well.",
      "revId": "a3c74b784b603bd136e29d5fa67fcb8a210872bd",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}