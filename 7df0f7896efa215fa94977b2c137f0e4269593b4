{
  "comments": [
    {
      "key": {
        "uuid": "9a245df4_98f2dd98",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 31
      },
      "lineNbr": 1273,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-12T12:16:43Z",
      "side": 1,
      "message": "remove this line...\nor, print only the vpnName, rd",
      "range": {
        "startLine": 1273,
        "startChar": 6,
        "endLine": 1273,
        "endChar": 75
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_021ddb0f",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 31
      },
      "lineNbr": 1273,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T06:46:45Z",
      "side": 1,
      "message": "removed.",
      "parentUuid": "9a245df4_98f2dd98",
      "range": {
        "startLine": 1273,
        "startChar": 6,
        "endLine": 1273,
        "endChar": 75
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_78ef29b1",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 31
      },
      "lineNbr": 1283,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-12T12:16:43Z",
      "side": 1,
      "message": "print vpnId",
      "range": {
        "startLine": 1283,
        "startChar": 68,
        "endLine": 1283,
        "endChar": 85
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_621ad718",
        "filename": "vpnservice/neutronvpn/neutronvpn-impl/src/main/java/org/opendaylight/netvirt/neutronvpn/NeutronvpnManager.java",
        "patchSetId": 31
      },
      "lineNbr": 1283,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T06:46:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a245df4_78ef29b1",
      "range": {
        "startLine": 1283,
        "startChar": 68,
        "endLine": 1283,
        "endChar": 85
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_98201df9",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 148,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-12T12:16:43Z",
      "side": 1,
      "message": "isRouterDissociatedFromVpn",
      "range": {
        "startLine": 148,
        "startChar": 20,
        "endLine": 148,
        "endChar": 28
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_82d8ab54",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 148,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T06:46:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a245df4_98201df9",
      "range": {
        "startLine": 148,
        "startChar": 20,
        "endLine": 148,
        "endChar": 28
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_781d69bd",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 150,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-12T12:16:43Z",
      "side": 1,
      "message": "Not required. isBgpVpn ensures that oldVpnId is bgpvpn",
      "range": {
        "startLine": 150,
        "startChar": 49,
        "endLine": 150,
        "endChar": 97
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_e2dd2744",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 150,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T06:46:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a245df4_781d69bd",
      "range": {
        "startLine": 150,
        "startChar": 49,
        "endLine": 150,
        "endChar": 97
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_cc813a4c",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 168,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-12T12:16:43Z",
      "side": 1,
      "message": "Why is this block required?\nWhen a router dissociation from vpn happens, the subnetMap for all the subnets for that bgpvpn will be updated. Finally no address family will be associated to that bgpvpn.\nThis code block seems redundant as you will be doing an intensive read and search for all the subnets for the bgpvpn even when you know that on a dissociate, you need to withdraw both the ipv4 and ipv6 from the bgpvpn.\n\nSo, just withdraw ipversion from bgpvpn directly on a dissociate.\n\nAlso, please handle the case where the router is reassociated to the bgpvpn. In this case, you will have to advertise the vrfs for all the subnets for that bgpvpn",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_02e4bb0b",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 168,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T06:46:45Z",
      "side": 1,
      "message": "Isnt this use case can happen also when performing a route-interface-delete ?\nin that case, only the subnetmap is removed from the BGPVPN. no ?\n\nfor the adding, it happens here:\nhttps://git.opendaylight.org/gerrit/#/c/62916/31/vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnSubnetRouteHandler.java@183",
      "parentUuid": "9a245df4_cc813a4c",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_c53aad35",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 168,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-13T09:30:22Z",
      "side": 1,
      "message": "On a router-interface-delete, the vpnId in the subnetMap moves from non-null to null. This use case is handled in line138. There you will have to check if that subnet is the last IPV4/V6 subnet in tht bgpvpn and then withdraw accordingly.\n\nBut here in line 147, this case is only when a router is associated/dissociated from bgpvpn in this case all the subnets WILL be removed from the bgpvpn.",
      "parentUuid": "9a245df4_02e4bb0b",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_45a7dd4f",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 168,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T12:29:42Z",
      "side": 1,
      "message": "I will do some changes for line 138.\nand for line 147, I understand you propose to just withdraw all IP families from BGPVPN.\nMeaning for instance, i should not do any calculation, i could simply call vpnUtil.withdrawIpFamilyFromVpnInstance...\n\nbut what will happen if the BGPVPN is used by two routers ?\nor is associated to other networks ?\nIndeed, I don\u0027t think it should be the place to completely flush the BGPVPN",
      "parentUuid": "9a245df4_c53aad35",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_152d0e47",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/SubnetmapChangeListener.java",
        "patchSetId": 31
      },
      "lineNbr": 168,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-16T13:53:18Z",
      "side": 1,
      "message": "Thats a very good point Philippe:)\nI now realize that, the introduction of the ip-\u003cv4/v6\u003e-family boolean attribute compels us to handle the withdraw/advertise in both the ipv4/6 cases through the vpn update.\nHence, with the current implementation in 62916, we will have to handle all instances of vpnId updates in subnetMapChange:istener.\n\nAlso, the current changes in VpnOpStatusListener wont work, since the update logic there is executed only on a dissociate + delete of a vpn.",
      "parentUuid": "9a245df4_45a7dd4f",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_4546bdc0",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnSubnetRouteHandler.java",
        "patchSetId": 31
      },
      "lineNbr": 80,
      "author": {
        "id": 5871
      },
      "writtenOn": "2017-10-13T09:30:22Z",
      "side": 1,
      "message": "VpnSubnetRouteHandler is THE file written specifically to handle the SubnetRouteFeature to realise Virtual Access Gateway.\nPlease dont use this file for other scenarios such as updating addressFamilies like you have done here:)\n\nCall updateVpnnstanceWithIpFamily in SubnetMapChangeListener, where onSubnetAddedToVpn and subnetDeletedFromVpn is called.",
      "range": {
        "startLine": 80,
        "startChar": 12,
        "endLine": 80,
        "endChar": 59
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_203737e5",
        "filename": "vpnservice/vpnmanager/vpnmanager-impl/src/main/java/org/opendaylight/netvirt/vpnmanager/VpnSubnetRouteHandler.java",
        "patchSetId": 31
      },
      "lineNbr": 80,
      "author": {
        "id": 6574
      },
      "writtenOn": "2017-10-13T12:29:42Z",
      "side": 1,
      "message": "the changes are done so that vpnsubnetroutehandler is not modified",
      "parentUuid": "9a245df4_4546bdc0",
      "range": {
        "startLine": 80,
        "startChar": 12,
        "endLine": 80,
        "endChar": 59
      },
      "revId": "7df0f7896efa215fa94977b2c137f0e4269593b4",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}