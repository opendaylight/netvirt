{
  "comments": [
    {
      "key": {
        "uuid": "1a622d24_6dd56fb8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-19T14:39:06Z",
      "side": 1,
      "message": "not just for intra-DC L3 forwarding - removes it completely and uses segmentation ID for all use cases.",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_01f3e49e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-12-19T18:25:15Z",
      "side": 1,
      "message": "Abhinav,\n\nPlease correct this content as discussed..  \n\nWhat we are ensuring by this Spec is to remove use of MPLS Labels,  LPortTags and ELANTags for realizing L2 switching and L3 forwarding on the wire.\n\nIn the nodes themselves, the LportTag will continue to be used when pushing the packet from ELAN/L3VPN pipeline towards the VM as ACLService continues to use LPortTags.\n\nSimiarly ELANTags will continue to be used for handling broadcast packets both within the Node for broadcasts generated within that node and also for broadcasts that land from another node to the current node via INTERNAL VXLAN Tunnels..\n\nAs stressed, the wire will carry VXLAN VNIs as dictated by the tenant\u0027s Openstack configuration.",
      "parentUuid": "1a622d24_56b760d8",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_cddbe3eb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 16,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-19T14:39:06Z",
      "side": 1,
      "message": "typo remove double Instead",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_e1ed08b9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-12-19T18:25:15Z",
      "side": 1,
      "message": "VNIs (unique for every VXLAN enabled network) supplied by the tenant using Openstack.",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_d3fff0a8",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-22T14:25:04Z",
      "side": 1,
      "message": "nit: the file name is \"and-i3\" instead of \"and-l3\"",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_4defd387",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 38,
      "author": {
        "id": 5802
      },
      "writtenOn": "2016-12-18T16:17:33Z",
      "side": 1,
      "message": "What about the case where the destination is floating ip? DNAT is performed today at the destination OVS since it is the only OVS containing DNAT fip flows. Would this be changed? Or would the traffic have to traverse the L3 pipeline before reaching the ELAN pipeline?",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_ed497fb8",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 98,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-19T14:39:06Z",
      "side": 1,
      "message": "Does anything actually change here? Except the use of segmentation ID as VNI instead of lport/elan?",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_2df2576f",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 100,
      "author": {
        "id": 5802
      },
      "writtenOn": "2016-12-18T16:17:33Z",
      "side": 1,
      "message": "This is true for VxLAN provider network. For private flat/VLAN networks the output port will be the provider port attached to the network and it will traverse the egress table and not routed directly from FIB",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_4dc87322",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 105,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-19T14:39:06Z",
      "side": 1,
      "message": "Does anything change in regards to VLAN/Flat? Why is this mentioned?",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_2dcb771f",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 107,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-19T14:39:06Z",
      "side": 1,
      "message": "This should probably be under the title of the Egress DPN.",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_8de9eb82",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 108,
      "author": {
        "id": 5802
      },
      "writtenOn": "2016-12-18T16:17:33Z",
      "side": 1,
      "message": "This sentence does not match the actual pipeline described below. Packets from tunnel do not bypass the ELAN pipeline.",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_81f414f3",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 108,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-12-19T18:15:41Z",
      "side": 1,
      "message": "Match on VNI will take place in INTERNAL_TUNNEL_TABLE (TABLE 36) and as part of actions it will setup the ELAN-TAG and then submit the packet to ELAN Pipeline ELAN_DMAC_TABLE (TABLE 51).  \n\nTHE L2_VNI_TUN_DEMUX_TABLE is not involved here !\n\nPlease fix the above statement Abhinav.",
      "parentUuid": "1a622d24_56892025",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_8dd28bd0",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 115,
      "author": {
        "id": 670
      },
      "writtenOn": "2016-12-19T14:39:06Z",
      "side": 1,
      "message": "Are you proposing adding two new tables, for L3 and L2 DEMUX? Each as a separate service?\n\nCould you expand more on this proposal? What do these DEMUX tables do?\nWouldn\u0027t it be more symmetric and straightforward to not add any new tables, and simply add matches on VNI segmentation IDs to table\u003d0, and setting of a unique lport for each ID? \nThis is how VLAN provider networks operates, and that leaves the packet traversing the exact same pipeline on ingress and egress DPN.",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_a13af031",
        "filename": "docs/specs/vni-based-l2-switching-and-i3-router-forwarding.rst",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 5492
      },
      "writtenOn": "2016-12-19T18:33:29Z",
      "side": 1,
      "message": "Abhinav,\n\nIn general it will be better to put a para on changes before showing the pipeline.\n\nAs I SUGGESTED, let us please divide this Pipeline changes to have the following subsections:\n\n1.  L2 Switching:\n\n   1.1 Between VMs Within a single DPN:\n\n\u003cWhat is the change if any. If no change, please state that explicitly and show only the pipeline for understanding purposes.\nThis should cover ARP broadcast by the VM on that VPN.  This should also cover IP Unicast between VMs in that DPN\u003e\n\n   1.2 Between VMs on two different DPNs:\n\u003cWhat is the change if any.\u003e\n\n2. L3 Forwarding:\n\n  2.1  Between VMs within a single DPN:\n\u003cWhat is the change if any\u003e\n\n  2.2 Betweeen VMs across two different DPNs.\n\u003cWhat is the change if any\u003e\n\n3. NAT Service:\n   3.1  SNAT from a VM to reach Internet where the VM is in a non-NAPT switch.   Reverse SNAT traffic reaching back the VM.\n\u003cWhat is the change if any\u003e\n\n   3.2  SNAT from a VM to reach Internet where the VM is already in an NAPT switch.  Reverse SNAT traffic reaching back the VM.\n\u003cWhat is the change if any\u003e\n\nDNAT need not be covered, as we donot have a use-case for VNI for DNAT traffic.",
      "revId": "dc537a1ad75f992f27970fa9042adc3342ac3a05",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}