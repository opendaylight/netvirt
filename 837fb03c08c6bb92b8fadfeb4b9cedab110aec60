{
  "comments": [
    {
      "key": {
        "uuid": "1a622d24_1ff2669a",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/AbstractEgressAclServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 4540
      },
      "writtenOn": "2016-11-30T09:53:39Z",
      "side": 1,
      "message": "Let\u0027s optimise prematurely:\n\n    Acl acl \u003d optionalAcl.get();\n    List\u003cAce\u003e aces \u003d acl.getAccessListEntries().getAce();\n    String aclName \u003d acl.getAclName();\n    for (Ace ace : aces) {\n         programAceRule(dpId, lportTag, addOrRemove, aclName, ace, portId, null);\n    }",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_f2ed21f1",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/AbstractEgressAclServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 5867
      },
      "writtenOn": "2016-11-30T11:05:31Z",
      "side": 1,
      "message": "OK, done something like (incl. using my elseDo() approach).  FYI I\u0027ve tried to do this one full functional style, more for my own learning, and came up with below, which doens\u0027t work because you can\u0027t get to the outer acl for getAclName() form the inner ace - do you know of any trick for how this could be done? More our of curiosity than becaues we should do it here (as I anway fear this may be loosing some people in understanding functional style):\n\nAclServiceUtils.getAcl(dataBroker, sgUuid.getValue())\n  .transform(acl -\u003e acl.getAccessListEntries().getAce())\n  .or(Collections.emptyList())\n  .forEach(ace -\u003e {\n      programAceRule(dpId, lportTag, addOrRemove, \n         acl.getAclName(), ace, portId, null);\n  });",
      "parentUuid": "1a622d24_1ff2669a",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_52c7b512",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/AbstractEgressAclServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 4540
      },
      "writtenOn": "2016-11-30T12:37:50Z",
      "side": 1,
      "message": "If we drop the warning (which is useless really):\n\n            AclServiceUtils.getAcl(dataBroker, sgUuid.getValue()).asSet().forEach(\n                    acl -\u003e acl.getAccessListEntries().getAce().forEach(\n                            ace -\u003e programAceRule(dpId, lportTag, addOrRemove, acl.getAclName(), ace, portId, null)\n                    )\n            );\n\n(with Guava Optional).",
      "parentUuid": "1a622d24_f2ed21f1",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_5f2b3eeb",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/AbstractIngressAclServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 154,
      "author": {
        "id": 4540
      },
      "writtenOn": "2016-11-30T09:53:39Z",
      "side": 1,
      "message": "As previously.",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_b2ca896c",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/AbstractIngressAclServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 154,
      "author": {
        "id": 5867
      },
      "writtenOn": "2016-11-30T11:05:31Z",
      "side": 1,
      "message": "OK, done as previously.",
      "parentUuid": "1a622d24_5f2b3eeb",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_5f633e1a",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/infra/Optionals.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 4540
      },
      "writtenOn": "2016-11-30T09:53:39Z",
      "side": 1,
      "message": "You can use Supplier instead.",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_f2c40161",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/infra/Optionals.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 5867
      },
      "writtenOn": "2016-11-30T11:05:31Z",
      "side": 1,
      "message": "NOK, a java.util.function.Supplier gets a result, whereas a Procedure applies a block of code (without returning a result)",
      "parentUuid": "1a622d24_5f633e1a",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_1249bdd0",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/infra/Optionals.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 4540
      },
      "writtenOn": "2016-11-30T11:56:00Z",
      "side": 1,
      "message": "I had actually tried it before replying, so yes, you can use Supplier instead. (You can specify Supplier\u003cVoid\u003e if you want.)",
      "parentUuid": "1a622d24_f2c40161",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a622d24_d253c56a",
        "filename": "vpnservice/aclservice/impl/src/main/java/org/opendaylight/netvirt/aclservice/utils/AclServiceUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 621,
      "author": {
        "id": 4540
      },
      "writtenOn": "2016-11-30T12:37:50Z",
      "side": 1,
      "message": "Right, being able to use flatMap() here nearly justifies the use of java.util.Optional; there\u0027s no straightforward way of doing this with Guava\u0027s Optional. It\u0027s a shame the external API ends up using both variants though :-(.",
      "revId": "837fb03c08c6bb92b8fadfeb4b9cedab110aec60",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}